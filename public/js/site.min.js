/*! site 2014-06-25 */

var gb=gb||{};gb.Namespace=function(a,b){var c,d,e=b.split("."),f=a;for("gb"===e[0]&&(e=e.slice(1)),c=e.length,d=0;c>d;d++)"undefined"==typeof f[e[d]]&&(f[e[d]]={}),f=f[e[d]];return f},gb.Class=function(a){"use strict";var b=function(){this.init.apply(this,arguments)};if(a){var c=function(){};c.prototype=a.prototype,b.prototype=new c}return b.prototype.init=function(){},b.fn=b.prototype,b.fn.parent=b,b.extend=function(a){var c=a.extended;for(var d in a)b[d]=a[d];c&&c(b)},b.include=function(a){var c=a.included;for(var d in a)b.fn[d]=a[d];c&&c(b)},b},this.JST=this.JST||{},this.JST["handlebars/tile.hbs"]=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+="\n<p>",b=typeof a===j?a.apply(a):a,(b||0===b)&&(c+=b),c+="</p>\n"}function g(a){var b="";return b+='\n  <span class="label label-primary">'+k(typeof a===j?a.apply(a):a)+"</span>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+="<h2>",(h=c.pageTitle)?h=h.call(b,{hash:{},data:e}):(h=b&&b.pageTitle,h=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(h)+"</h2>\n<h3>",(h=c.subhead)?h=h.call(b,{hash:{},data:e}):(h=b&&b.subhead,h=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(h)+'</h3>\n<p class="description">',(h=c.description)?h=h.call(b,{hash:{},data:e}):(h=b&&b.description,h=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(h)+"</p>\n",h=c.each.call(b,b&&b.body,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='\n\n<div class="indent">\n  <span class="label">Tech:</span>\n',h=c.each.call(b,b&&b.tech,{hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e}),(h||0===h)&&(i+=h),i+="\n</div>\n"}),gb.Namespace(gb,"gb.util"),gb.util={randomArray:function(a,b){for(var c=new Array(a),d=0;a>d;d++)c[d]=Math.floor(Math.random()*(b+1));return c},arrayMax:function(a){return Math.max.apply(Math,a)},arrayMin:function(a){return Math.min.apply(Math,a)},zeroFill:function(a,b){return b-=a.toString().length,b>0?new Array(b+(/\./.test(a)?2:1)).join("0")+a:a+""},throttle:function(a,b){var c,d=b||500;return function(){var b=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(b,Array.prototype.slice.call(e))},d)}}},gb.Namespace(gb,"gb.ui"),gb.ui={ScreenSizes:{sm:480,md:768,lg:992,xl:1200},screenMode:"lg",onResizeHandler:function(){var a=gb.ui.ScreenSizes,b=$(window).width();gb.ui.screenWidth=$(window).width(),gb.ui.screenHeight=$(window).height(),b<a.sm?gb.ui.screenMode="xs":b>=a.sm&&b<a.md?gb.ui.screenMode="sm":b>=a.md&&b<a.lg?gb.ui.screenMode="md":b>=a.lg&&b<a.xl?gb.ui.screenMode="lg":b>=a.xl&&(gb.ui.screenMode="xl"),$(this).trigger("resizeEnd")}},gb.Namespace(gb,"gb.ui.TouchSurface"),gb.ui.TouchSurface=new gb.Class,gb.ui.TouchSurface.include({init:function(a,b){"use strict";try{var c=this;this.touchSurface=a,this.direction="none",this.swipeType="none",this.startX=null,this.startY=null,this.distX=null,this.distY=null,this.threshold=50,this.restraint=50,this.allowedTime=500,this.elapsedTime=null,this.startTime=null,this.touchHandler=b||function(){},this.touchSurface.addEventListener("touchstart",function(a){c.onTouchStart(a)},!1),this.touchSurface.addEventListener("touchmove",function(a){c.onTouchMove(a)},!1),this.touchSurface.addEventListener("touchend",function(a){c.onTouchEnd(a)},!1)}catch(d){}},removeEventListeners:function(){try{this.touchSurface.removeEventListener("touchstart"),this.touchSurface.removeEventListener("touchmove"),this.touchSurface.removeEventListener("touchend")}catch(a){}},debug:function(){console.log("----------------"),console.log("startX",this.startX,"startY",this.startY),console.log("x",this.distX,"y",this.distY,this.axis,this.direction)},onTouchStart:function(a){var b=a.changedTouches[0];a.preventDefault(),this.axis=null,this.direction="none",this.swipeType="none",this.startX=b.pageX,this.startY=b.pageY,this.startTime=(new Date).getTime(),this.touchHandler(a,"none","start",this.swipeType,0)},onTouchMove:function(a){var b=a.changedTouches[0];a.preventDefault(),this.distX=b.pageX-this.startX,this.distY=b.pageY-this.startY,this.axis||(this.axis=Math.abs(this.distX)>Math.abs(this.distY)?"horizontal":"vertical"),"horizontal"===this.axis?(this.direction=this.distX<0?"left":"right",this.touchHandler(a,this.direction,"move",this.swipeType,this.distX)):(this.direction=this.distY<0?"up":"down",this.touchHandler(a,this.direction,"move",this.swipeType,this.distY))},onTouchEnd:function(a){a.preventDefault(),this.elapsedTime=(new Date).getTime()-this.startTime,this.elapsedTime<=this.allowedTime&&(Math.abs(this.distX)>=this.threshold&&Math.abs(this.distY)<=this.restraint?this.swipeType=this.direction:Math.abs(this.distY)>=this.threshold&&Math.abs(this.distX)<=this.restraint&&(this.swipeType=this.direction));var b="left"===this.direction||"right"===this.direction?this.distX:this.distY;this.touchHandler(a,this.direction,"end",this.swipeType,b)}}),gb.Namespace(gb,"gb.ui.PreloadableImage"),gb.ui.PreloadableImage=new gb.Class,gb.ui.PreloadableImage.include({init:function(a,b,c,d){"use strict";this.id=a,this.startTime=(new Date).valueOf(),this.endTime=this.startTime,this.image=new Image,this.setSource(b),this.setOnLoad(c),this.setOnError(d)},setSource:function(a){return a?void(this.image.src=a):void(this.image.src="")},setOnLoad:function(a){var b=this;if(!a||"function"!=typeof a)return void(this.image.onload=function(){b.endTime=(new Date).valueOf()});var c=function(c){b.endTime=(new Date).valueOf(),a(c)};this.image.onload=c},setOnError:function(a){var b=this;return a&&"function"==typeof a?(this.endTime=(new Date).valueOf(),void(this.image.onerror=a)):void(this.image.onerror=function(){b.endTime=(new Date).valueOf()})},getTotalTimeMS:function(){return this.endTime-this.startTime}}),gb.Namespace(gb,"gb.ui.Tile"),gb.ui.Tile=new gb.Class,gb.ui.Tile.include({init:function(a,b){"use strict";this.jq=$("<div/>",b).appendTo(a)},transition:function(a){this.jq.transition(a)},show:function(){this.jq.show()},hide:function(){this.jq.hide()},onResizeEndHandler:function(){console.log("Tile.onResizeEndHandler")},activate:function(){},deactivate:function(){}}),gb.Namespace(gb,"gb.util.TimeOutCycle"),gb.util.TimeOutCycle=new gb.Class,gb.util.TimeOutCycle.include({init:function(a,b){"use strict";this.timeoutMS=a,this.running=!1,this.timeoutHandle=null,this.tickHandler=function(){console.log("default tickHandler")},this.setTimeoutMS(a),this.setTickHandler(b)},setTickHandler:function(a){a&&"function"==typeof a&&(this.tickHandler=a)},setTimeoutMS:function(a){a&&(this.timeoutMS=a)},start:function(){this.running=!0,this._tick()},stop:function(){this.running=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)},isRunning:function(){return this.running===!0},_tick:function(){this.running&&(this.tickHandler(),this._setNext())},_setNext:function(){var a=this;this.running&&(this.timeoutHandle=setTimeout(function(){a._tick()},this.timeoutMS))}}),function(a){a.fn.fullscreen=function(b){"use strict";var c=a.extend({front:"#background",bgHeightClass:"bgheight",bgWidthClass:"bgwidth",refreshInterval:5e3,fadeOutTime:500,fadeInTime:700,successCallback:function(){},errorCallback:function(){},images:["images/image-001.png","images/image-002.png","images/image-003.png"]},b),d=a(window),e=a(c.front),f=d.width()/d.height(),g=e.width()/e.height(),h=null,i=[],j=0,k=function(){j<c.images.length-1?j++:j=0;var a=function(){e.attr("src",c.images[j]),e.transition({opacity:1},c.fadeInTime,"snap"),l()};e.transition({opacity:0},c.fadeOutTime,"snap",a)},l=function(){var a=i[j].image.width,b=i[j].image.height;g=a/b,f=d.width()/d.height(),e.removeClass().addClass(f>g?c.bgWidthClass:c.bgHeightClass)},m=function(){for(var a=0,b=c.images.length;b>a;a++){var d="img"+a,e=c.images[a],f=new gb.ui.PreloadableImage(d,e,c.successCallback,c.errorCallback);i.push(f)}},n=function(){d.on("resizeEnd",l),h||(h=setInterval(k,c.refreshInterval))};return m(),n(),this}}(jQuery),function(a){a.fn.search=function(b){"use strict";var c=this,d=null,e=null,f=a.extend({input:"search-field",results:"search-results",minchars:4,requestInterval:3e3},b),g=function(a,b){var d="<div class='heading'>"+a+": "+b+"</div>";c.resultsDiv.append(d)},h=function(a,b){var d=b.tracks;if(b.count&&d&&d.length){g(a,b.count);for(var e=0,f=d.length;f>e;e++){var h="<div class='track'><div class='title'>"+d[e].Name+"</div><div class='normal'>"+d[e].Artist+"</div><div class='normal'>"+d[e].Album+"</div></div>";c.resultsDiv.append(h)}}},i=function(a,b){var d=b.tracks;if(b.count&&d&&d.length){g(a,b.count);for(var e=0,f=d.length;f>e;e++){var h="<div class='track'><div class='title'>"+d[e]._id+" <span class='count'>"+d[e].value+"</span></div></div>";c.resultsDiv.append(h)}}},j=function(){c.resultsDiv.empty(),c.resultsDiv.hide()},k=function(a){c.resultsDiv.show();var b=a.keys;if(c.resultsDiv.empty(),a.total){var d="<div class='found'>Found: "+a.total+"</div>";c.resultsDiv.append(d);for(var e=0,f=b.length;f>e;e++){var g=b[e],j=a.data[g];"find"===a.data[g].type?h(g,j):i(g,j)}}else c.resultsDiv.append("<div class='none-found'>No results found.</div>")},l=function(){var b=c.searchInput.val().trim();if(b.length<f.minchars)return void j();if(b!==e){e=b;var d="/multi-search/"+b;a.ajax({url:d,type:"GET",dataType:"json",success:function(a,b){console.log("success:",b),k(a)}})}};this.onResize=function(){if(c.searchInput){var a=c.searchInput.position(),b=c.searchInput.outerWidth(!0),d=c.searchInput.outerHeight(!0);c.resultsDiv.css({position:"absolute",top:a.top+d+10+"px",left:a.left+"px",width:b+"px",height:"600px"})}};var m=function(){return c.searchInput=a("#"+f.input),"undefined"==typeof c.searchInput[0]?null:(d||(d=setInterval(l,f.requestInterval)),c.searchInput.after("<div id='"+f.results+"'></div>"),c.resultsDiv=a("#"+f.results),c.onResize(),c.resultsDiv.hide(),c)};return m()}}(jQuery),$(function(){var a=$("#search-field").search();a&&$(window).resize(gb.util.throttle(a.onResize,500))}),gb.Namespace(gb,"gb.ui.Timeline"),gb.ui.Timeline=new gb.Class,gb.ui.Timeline.include({MONTHS:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],init:function(a){"use strict";this.x=0,this.y=0,this.margin=70,this.trackHeight=24,this.yTrack=200,this.paper=null,this.selected=null,this.startDateLabel=null,this.endDateLabel=null,this.htmlContent=null,this.id=a,this.jqContainer=$("#"+this.id),this.ajaxURL="/api/timeline",this.timelineData=null;var b=this;$.getJSON(this.ajaxURL,function(a){b.timelineData=a,b.onDataHandler()})},resize:function(){this.htmlContent||(this.htmlContent=this.jqContainer.html()),this.width=this.jqContainer.width(),this.height=this.jqContainer.height(),this.trackWidth=this.width-2*this.margin,this.paper&&this.paper.clear(),this.width>768?(this.jqContainer.empty(),this.paper=Raphael(this.id,this.width,this.height),this.processData(this.timelineData),this.draw()):this.jqContainer.html(this.htmlContent)},processData:function(a){this.dataPoints=[];for(var b=null,c=null,d=a.length,e=null,f=0,g=d;g>f;f++)e=a[f],e.startDate&&(b=b?Math.min(e.startDate,b):e.startDate,c=c?Math.max(e.startDate,c):e.startDate),e.endDate||(e.endDate=(new Date).valueOf()),b=b?Math.min(e.endDate,b):e.endDate,c=c?Math.max(e.endDate,c):e.endDate;var h=c-b;for(this.xMin=b,this.xMax=c,this.xScale=this.trackWidth/h,f=0,g=d;g>f;f++)e=a[f],e.xStart=Math.floor(this.margin+this.xScale*(e.startDate-b)),e.xEnd=Math.floor(this.margin+this.xScale*(e.endDate-b)),this.dataPoints.push(e)},draw:function(){var a=this,b="M"+(this.x+this.margin)+" "+this.yTrack+"L"+(this.width-this.margin)+" "+this.yTrack;this.track=this.paper.path(b);var c={stroke:"#ccc","stroke-width":this.trackHeight,"stroke-linecap":"round"};this.track.attr(c);for(var d=function(){var b=this.data("startPoint"),c=this.data("endPoint"),d=this.data("dataPoint");if(a.selected=a.drawSegment(d.startDate,d.endDate),a.selected.animate({opacity:1},500,"easeInOut"),b.stop(),b.toFront(),c.stop(),c.toFront(),b.animate({fill:"#DE001E"},50,"linear"),c.animate({cx:d.xEnd,fill:"#FF8400"},300,"easeInOut"),a.drawHeader(d),a.startDateLabel&&a.startDateLabel.remove(),a.endDateLabel&&a.endDateLabel.remove(),this.toFront(),a.startDateLabel=a.drawDate(d.startDate),a.endDateLabel=a.drawDate(d.endDate),a.startDateLabel.animate({opacity:1},300,"easeInOut"),d.startDate!==d.endDate){var e=a.startDateLabel.getBBox().x2,f=a.endDateLabel.getBBox().x;e>f&&a.endDateLabel.transform("T20,0"),a.endDateLabel.animate({opacity:1},300,"easeInOut")}},e=function(){var b=this.data("startPoint"),c=this.data("endPoint"),d=this.data("dataPoint");a.selected&&a.selected.remove(),a.startDateLabel&&a.startDateLabel.remove(),a.endDateLabel&&a.endDateLabel.remove(),b.animate({fill:"#333"},50,"linear"),c.animate({cx:d.xStart,fill:"#999"},500,"easeInOut")},f=function(){this.data("dataPoint")},g={hoverPoint:{fill:"#00b","stroke-width":"0",opacity:0},startPoint:{opacity:0,cx:0,fill:"#ccc","stroke-width":"0"},endPoint:{fill:"#999","stroke-width":"0"}},h=0,i=this.dataPoints.length;i>h;h++){var j=this.dataPoints[h],k=this.paper.circle(j.xStart,this.yTrack,15);k.attr(g.hoverPoint);var l=this.paper.circle(j.xStart,this.yTrack,10);l.attr(g.startPoint),l.animate({opacity:1,fill:"#333",cx:j.xStart},100*h,"easeInOut");var m=this.paper.circle(j.xStart,this.yTrack,5);m.attr(g.endPoint),k.toFront(),k.data("dataPoint",j),k.data("startPoint",l),k.data("endPoint",m),k.hoverInBounds(d,e),k.click(f)}var n=this.dataPoints.length-1;this.drawHeader(this.dataPoints[n]),this.drawTicks()},drawHeader:function(a){var b={"font-size":"32pt","text-anchor":"start","font-family":"Source Sans Pro"},c={"font-size":"16pt","text-anchor":"start","font-family":"Source Sans Pro"},d={"font-size":"16pt","text-anchor":"start","font-family":"Source Sans Pro"};this.title&&this.title.remove(),this.title=this.paper.text(this.margin,40,a.title),this.title.attr(b),this.subhead&&this.subhead.remove(),this.subhead=this.paper.text(this.margin,70,a.employer),this.subhead.attr(c),this.location&&this.location.remove(),this.location=this.paper.text(this.margin,94,a.location),this.location.attr(d)},drawTicks:function(){for(var a={fill:"#333","font-size":"10pt","font-family":"Source Sans Pro"},b=new Date(this.dataPoints[0].startDate),c=b.getUTCFullYear(),d=new Date(this.dataPoints[this.dataPoints.length-1].endDate),e=d.getUTCFullYear(),f=c+1;e>=f;f++){var g=new Date("Jan 1, "+f).valueOf(),h=Math.floor(this.margin+(g-this.xMin)*this.xScale);this.paper.text(h,this.yTrack+30,f).attr(a)}},drawDate:function(a){var b={opacity:0,fill:"#333","font-size":"16pt","font-family":"Source Sans Pro"},c={opacity:0,fill:"#333","font-size":"12pt","font-family":"Source Sans Pro"},d=Math.floor(this.margin+(a-this.xMin)*this.xScale),e=new Date(a),f=this.MONTHS[e.getUTCMonth()],g=e.getUTCFullYear(),h=this.paper.set();return h.push(this.paper.text(d,this.yTrack-40,f).attr(b),this.paper.text(d,this.yTrack-20,g).attr(c)),h},drawSegment:function(a,b){var c=Math.floor(this.margin+(a-this.xMin)*this.xScale),d=Math.floor(this.margin+(b-this.xMin)*this.xScale),e="M"+c+" "+this.yTrack+"L"+d+" "+this.yTrack;this.selected&&this.selected.remove(),e=this.paper.path(e);var f={opacity:.7,stroke:"#FAD905","stroke-width":this.trackHeight-4,"stroke-linecap":"round"};return e.attr(f)},onResizeEndHandler:function(){this.paper&&this.paper.clear(),this.resize()},onDataHandler:function(){var a=this;$(window).on("resizeEnd",function(){a.onResizeEndHandler()}),$(window).on("resize",function(){a.paper&&a.paper.clear()}),this.onResizeEndHandler()}}),gb.Namespace(gb,"gb.ui.FullScreen"),gb.ui.FullScreen=new gb.Class,gb.ui.FullScreen.include({init:function(){"use strict";this.spinner=$("#spinner"),this.spinner.show(),this.mediaHost="//media.suayan.com/",this.images=[],this.howMany=3,this.countLoaded=0,this.initImageList(),this.initBackground(),console.log("init: FullScreen.")},initBackground:function(){var a=this;$("body").fullscreen({refreshInterval:3e4,fadeOutTime:5e3,fadeInTime:3e3,successCallback:function(){a.checkSpinner()},errorCallback:function(){a.checkSpinner()},images:this.images})},checkSpinner:function(){this.countLoaded++,this.countLoaded===this.howMany&&this.spinner.hide()},initImageList:function(){this.images=[];for(var a=1;a<=this.howMany;a++){var b=gb.util.zeroFill(a,3);this.images.push(this.mediaHost+"images/image-"+b+".jpg")}}}),gb.Namespace(gb,"gb.ui.Stage"),gb.ui.Stage=gb.Class(gb.ui.Tile),gb.ui.Stage.include({COLORS:["#FFF1CE","#17607D","#002A4A","#FF9311","#E33200","#002A4A","#D1DBBD","#91AA9D","#3E606F","#193441","#3C3658","#3EC8B7","#7CD0B4","#B9D8B1","#F7E0AE"],init:function(a){"use strict";if(this.tiles=[],this.tileOffsets=[],this.howMany=15,this.intervalMS=15e3,this.currentIndex=0,a){var b=this;this.selector=a,this.jq=$("#"+a),this.contentSelector="#"+a+"-content",this.content=$("<div id='"+a+"-content'></div>"),this.jq.append(this.content),this.initTiles(),this.loadTileData(),this.show(),this.timeoutCycle=new gb.util.TimeOutCycle(this.intervalMS,function(){b.rotate()}),this.touchSurface=new gb.ui.TouchSurface(this.content[0],function(a,c,d,e,f){b.onTouchEvent(a,c,d,e,f)}),$(window).resize(function(){b.fadeOut()}),$("#stage-next").on("click",function(){b.goToNext()}),$("#stage-prev").on("click",function(){b.goToPrevious()}),console.log("init: Stage.")}},initTiles:function(){this.tiles=[],this.tileOffsets=[];for(var a=0,b=0;b<this.howMany;b++){var c=new gb.ui.Tile(this.contentSelector,{id:"tile-"+b,"class":"tile"});c.jq.html("<p>Tile: "+b+"</p>");var d=c.jq.get(0);d&&(d.style.backgroundColor=this.COLORS[a]),this.tiles.push(c),a>this.COLORS.length-2?a=0:a++}this.resizeTiles()},loadTileData:function(){var a=this;$.get("/api/tiles",function(b){for(var c=1,d=JST["handlebars/tile.hbs"],e=0,f=b.length;f>e;e++)a.tiles[c].jq.html(d(b[e])),c++})},onTouchEvent:function(a,b,c,d,e){if("move"===c&&this.tileOffsets){var f=3,g=-1*this.tileOffsets[this.currentIndex]+e*f,h=-1*this.tileOffsets[1]*(this.tileOffsets.length-1);if(!(0>g&&g>h))return;this.content.css({x:g})}if("end"===c)switch(b){case"left":this.goToNext();break;case"right":this.goToPrevious()}},resizeTiles:function(){for(var a=0,b=this.jq.width(),c=this.jq.height(),d=this.tiles,e=0,f=d.length;f>e;e++){d[e].jq.width(b),d[e].jq.height(c);var g=d[e].jq.get(0);g&&(g.style.top="0px",g.style.left=a+"px"),this.tileOffsets[e]=a,a+=b}},isRunning:function(){return this.timeoutCycle.isRunning()===!0},start:function(){this.timeoutCycle.start()},stop:function(){this.timeoutCycle.stop()},rotate:function(){this.currentIndex<this.tiles.length-1?this.goToNext():this.goTo(0)},goToPrevious:function(){this.currentIndex>0?this.currentIndex--:this.currentIndex=0,this.goTo(this.currentIndex)},goToNext:function(){this.currentIndex<this.tiles.length-2?this.currentIndex++:this.currentIndex=this.tiles.length-1,this.goTo(this.currentIndex)},goTo:function(a){this.currentIndex=a;var b=-1*this.tileOffsets[a];this.content.transition({x:b,queue:!1},1e3,"ease")},show:function(){this.jq.css({opacity:1}),this.goTo(this.currentIndex)},hide:function(){this.jq.hide()},fadeOut:function(){this.jq.css({opacity:.3})},onResizeEndHandler:function(){this.fadeOut(),this.resizeTiles(),this.show()}}),gb.Namespace(gb,"gb.ui.ContentManager"),gb.ui.ContentManager=new gb.Class,gb.ui.ContentManager.include({init:function(a){"use strict";var b=this;this.content=$(a),this.content.html()&&(this.visible=!0,this.fullscreen=new gb.ui.FullScreen,this.stage=new gb.ui.Stage("stage"),this.timeline=new gb.ui.Timeline("tile-0"),$("#slideshow-button").click(function(){b.toggleSlideShow()}),$("#play-button").click(function(){b.toggleStage()}),$(window).on("resizeEnd",function(){b.onResizeEndHandler()}),console.log("init: ContentManager"))},onResizeEndHandler:function(){this.timeline.onResizeEndHandler(),this.stage.onResizeEndHandler()},toggleSlideShow:function(){this.visible=!this.visible,this.visible?($("#ui-toolbar .glyphicon-home").removeClass("glyphicon-home").addClass("glyphicon-picture"),this.show()):($("#ui-toolbar .glyphicon-picture").removeClass("glyphicon-picture").addClass("glyphicon-home"),this.hide())},toggleStage:function(){this.stage.isRunning()?($("#ui-toolbar .glyphicon-pause").removeClass("glyphicon-pause").addClass("glyphicon-play"),this.stage.stop()):($("#ui-toolbar .glyphicon-play").removeClass("glyphicon-play").addClass("glyphicon-pause"),this.stage.start())},show:function(){var a=this;this.content.transition({opacity:1},2e3,function(){a.content.attr({visibility:"visible",display:"block"})})},hide:function(){var a=this;this.content.transition({opacity:0},2e3,function(){a.content.attr({visibility:"hidden",display:"none"})})}}),gb.Namespace(gb,"gb.ws.SocketClient"),gb.ws.SocketClient=new gb.Class,gb.ws.SocketClient.include({init:function(){var a=this;io&&(console.log("Init gb.ws.SocketClient."),this.socket=io.connect(socketHost),this.socket.on("connect",function(){console.log("Client connected."),a.onConnect()}),this.socket.on("updatesystem",function(b,c){a.onUpdateSystem(b,c)}),this.socket.on("broadcast",function(a,b){console.log("broadcast",a,b)}))},appendMessage:function(a,b,c){({ts:moment(a).fromNow(),username:b,message:c})},onConnect:function(){$.ajax({url:"/api/logs",dataType:"json",success:function(){}})},onUpdateSystem:function(a,b){console.log("updatesystem",a,b)},emit:function(a,b){this.socket.emit(a,b)}}),$(function(){new gb.ws.SocketClient}),$(function(){"use strict";new gb.ui.ContentManager("#content");$(window).resize(gb.util.throttle(gb.ui.onResizeHandler,500))});
//# sourceMappingURL=site.min.map