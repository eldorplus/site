// Generated by CoffeeScript 1.6.3
(function() {
  "use strict";
  $(window).load(function() {
    var backgrounds, checkSpinner, countLoaded, images, mediaHost, onError, onResizeHandler, onSuccess, preloadBackgrounds, totalBackgrounds;
    mediaHost = "//media.suayan.com/";
    images = [];
    backgrounds = [];
    totalBackgrounds = 5;
    countLoaded = 0;
    checkSpinner = function() {
      countLoaded++;
      if (countLoaded === totalBackgrounds) {
        return $("#spinner").hide();
      }
    };
    onSuccess = function() {
      return checkSpinner();
    };
    onError = function() {
      return checkSpinner();
    };
    preloadBackgrounds = function() {
      var i, n, numStr, preloader, _results;
      i = 1;
      while (i <= totalBackgrounds) {
        numStr = gb.util.ZeroFill(i, 3);
        images.push(mediaHost + "images/image-" + numStr + ".jpg");
        i++;
      }
      i = 0;
      n = images.length;
      _results = [];
      while (i < n) {
        preloader = new gb.ui.PreloadableImage("img" + i, images[i], onSuccess, onError);
        backgrounds.push(preloader);
        _results.push(i++);
      }
      return _results;
    };
    preloadBackgrounds();
    return onResizeHandler = function(e) {
      var content, toggleContent, visibleContent;
      $(window).resize(util.ResizeThrottle(onResizeHandler, 500));
      $("#spinner").show();
      $("body").fullscreen({
        refreshInterval: 30000,
        fadeOutTime: 1000,
        fadeInTime: 50,
        images: images
      });
      content = $("#content");
      visibleContent = true;
      toggleContent = function() {
        visibleContent = !visibleContent;
        if (visibleContent) {
          return content.stop().animate({
            opacity: 1
          }, 500, "swing", function() {
            return content.attr({
              visibility: "visible",
              display: "block"
            });
          });
        } else {
          return content.stop().animate({
            opacity: 0
          }, 1000, "swing", function() {
            return content.attr({
              visibility: "hidden",
              display: "none"
            });
          });
        }
      };
      return $("#ui-toolbar").click(toggleContent);
    };
  });

}).call(this);

/*
//@ sourceMappingURL=loader.map
*/
